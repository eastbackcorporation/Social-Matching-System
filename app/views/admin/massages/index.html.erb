<div class="center_content">

	<%= render "admin/sidemenu" %>

	<div class="index_content">
    <%=raw jqgrid("依頼情報一覧", "Message", "/admin/massages",
      [
        { :name => "id", :label => "id", :index => 'id',:align => 'center', :width => "35", :hidden => true },
        { :name => "end_flg",
          :label => "状況",
          :align => 'center',
          :width => "45",
          :customFormatter => 'makeEndValue'
        },
        { :name => "category.name", :label => "カテゴリ", :index => 'category_id',:align => 'center', :width => "45" },
        { :name => "request_status.name", :label => "依頼ステータス", :index => 'request_status_id',:align => 'center', :width => "50" },
        { :name => "matching_status.name", :label => "検索ステータス", :index => 'matching_status_id',:align => 'center', :width => "50" },
        { :name => "validated_datetime",
          :label => "有効期限",
          :index => 'validated_datetime',
          :align => 'center',
           :width => "100",
          :sorttype => 'date',
          :formatter => 'date',
          :formatoptions => {
            :srcformat => "UniversalSortableDateTime",
            :newformat => 'Y/m/d G:i'
          }
        },
        { :name => "active_datetime",
          :label => "実施日",
          :index => 'active_datetime',
          :align => 'center',
           :width => "100",
          :sorttype => 'date',
          :formatter => 'date',
          :formatoptions => {
            :srcformat => "UniversalSortableDateTime",
            :newformat => 'Y/m/d G;i'
          }
        },
        { :name => "id",
          :label => "操作",
          :search => false,
          :sortable => false,
          :align => 'center',
          :width => "55",
          :customFormatter => 'makeLink'
        }
      ],
      {
        :autowidth => true,
        :edit => false,
        :add => false,
        :view => false,
        :delete => false,
        :rowNum => 30,
        :rowList => [10,20,30,50],
        :height => 300,
      }
    ) %>
	</div><!-- end of right content-->
</div>
<!--end of center content -->

<script type="text/javascript">
	function makeLink(cellvalue, options, rowObject){
		var url = "/admin/massages/"
		showUrl = url + cellvalue;
		editUrl = url + cellvalue + "/edit"
		return "<a href='" + showUrl + "'>詳細</a>";
	}
	function makeEndValue(cellvalue, options, rowObject){
	 if(cellvalue == "true" ){
	   return "終了";
	 }else{
	   return "実施前";
	 }
	}
</script>

